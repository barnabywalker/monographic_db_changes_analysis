# How integrated systematics is harnessing the conservation potential of megadiverse, taxonomically complex groups

This repository contains the code use to carry out the analysis of specimen changes between 2007 and 2017 in a curated monograph database for Neotropical Myrcia species, discussed in the paper "How integrated systematics is harnessing the conservation potential of megadiverse, taxonomically complex groups".

## Re-running the analysis
The code is provided as an R project folder, with packages tracked by [Packrat](https://rstudio.github.io/packrat/). This means that it should be possible to clone or download the repository, open the project in RStudio, and re-run the analysis.

The data needed to run the analysis can be found on [Figshare](insert_link_when_published). Download the two *.csv* files (**specimen_data.csv** and **name_change_data.csv**) and place them in the data folder.

To run the analysis, execute the code in the **run_analysis.R** script.

## Contents

The code contained in this project is organised into the following folders.

### Analysis

R scripts used to perform the analysis. Each script performs a particular function.

1. **extract_data.R** - extracts data from the database and the raw name changes file, cleans it, and saves it in the right format for the rest of the scripts. This has been provided to show how the data was cleaned. The output of this script is the two data files link to above.

2. **transform_data.R** - transforms the extracted data into conservation assessments and measurements of EOO change.

3. **summarise_data.R** - summarises the extracted and transformed data and outputs a spreadsheet containing the data.

4. **plot_data.R** - generates plots of the data.

Each script can be run separately, or run in order using the **run_analysis.R** script in the root directory.

### Data

Files containing the data to be analysed. These can be downloaded from [Figshare](insert_link_when_published).

### Figures

Any figures generated by the scripts are saved here.

### Output

Any data files generated by the scripts are saved here.

### Packrat

The folder [Packrat](https://rstudio.github.io/packrat/) uses to store the packages used in this project.

### R

Files containing functions that are used in the analysis scripts.
* **data_processing_functions.R** - functions used to load and clean data.
* **record_change_functions.R** - functions used to identify the changes that have occured to specimen records.
* **analysis_functions.R** - functions used to analyse the data.
* **plotting_functions.R** - functions to help plot the data.